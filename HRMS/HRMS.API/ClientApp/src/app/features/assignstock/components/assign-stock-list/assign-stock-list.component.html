<!-- <table class="table table-bordered">
    <thead>
      <tr>
        <th>ID</th>
        <th>Employee Name</th>
        <th>Stock Name</th>
        <th>Stock Type</th> 
        <th>Assigned Quantity</th>
        <th>Assignment Date</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let assignment of stockAssignments">
        <td>{{ assignment.id }}</td>
        <td>{{ assignment.employeeName }}</td>
        <td>{{ assignment.stockName }}</td>
        <td>{{ assignment.stockType }}</td> 
        <td>{{ assignment.assignedQuantity }}</td>
        <td>{{ assignment.assignmentDate | date: 'yyyy-MM-dd HH:mm:ss' }}</td>

      </tr>
    </tbody>
  </table> -->



  <!--second code   -->
  <!-- <p-toast></p-toast>

<button pButton type="button" label="Assign Stock" icon="pi pi-plus" class="p-button-success mb-3" (click)="openCreateDialog()"></button>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>ID</th>
      <th>Employee</th>
      <th>Stock</th>
      <th>Stock Type</th>
      <th>Assigned Quantity</th>
      <th>Assignment Date</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let assignment of stockAssignments">
      <td>{{ assignment.id }}</td>
      <td>{{ assignment.employeeName }}</td>
      <td>{{ assignment.stockName }}</td>
      <td>{{ assignment.stockType }}</td>
      <td>{{ assignment.assignedQuantity }}</td>
      <td>{{ assignment.assignmentDate | date: 'yyyy-MM-dd HH:mm:ss' }}</td>
      <td>
        <button pButton icon="pi pi-pencil" class="p-button-text" (click)="openEditDialog(assignment)"></button>
        <button pButton icon="pi pi-trash" class="p-button-text text-danger" (click)="deleteAssignment(assignment.id)"></button>
      </td>
    </tr>
  </tbody>
</table>

<p-dialog header="{{ isEditMode ? 'Edit Assignment' : 'New Assignment' }}"
          [(visible)]="dialogVisible"
          [modal]="true"
          [style]="{ width: '400px' }">
  <form [formGroup]="assignForm" (ngSubmit)="submit()">
    <div class="p-fluid">
      <div class="field">
        <label>Employee</label>
        <p-dropdown
          [options]="employees"
          optionLabel="name"
          optionValue="id"
          formControlName="employeeId"
          placeholder="Select Employee">
        </p-dropdown>
      </div>

      <div class="field">
        <label>Stock</label>
        <p-dropdown
          [options]="stocks"
          optionLabel="name"
          optionValue="id"
          formControlName="stockId"
          placeholder="Select Stock">
        </p-dropdown>
      </div>

      <div class="field">
        <label>Quantity</label>
        <input pInputText type="number" formControlName="assignedQuantity" />
      </div>

      <div class="mt-3 text-end">
        <button pButton type="submit" label="{{ isEditMode ? 'Update' : 'Create' }}" class="p-button-success" [disabled]="assignForm.invalid"></button>
      </div>
    </div>
  </form>
</p-dialog> -->


<p-toast></p-toast>

<button pButton type="button" label="Assign Stock" icon="pi pi-plus" class="p-button-success mb-3" (click)="openCreateDialog()"></button>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>ID</th>
      <th>Employee</th>
      <th>Stock</th>
      <th>Stock Type</th>
      <th>Assigned Quantity</th>
      <th>Assignment Date</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>

    
    <tr *ngFor="let assignment of stockAssignments">
      <td>{{ assignment.id }}</td>
      <td>{{ assignment.employeeName }}</td>
      <td>{{ assignment.stockName }}</td>
      <td>{{ assignment.stockType }}</td>
      <td>{{ assignment.assignedQuantity }}</td>
      <td>{{ assignment.assignmentDate | date: 'yyyy-MM-dd HH:mm:ss' }}</td>
      <td>
        <button pButton icon="pi pi-pencil" class="p-button-text" (click)="openEditDialog(assignment)"></button>
        <button pButton icon="pi pi-trash" class="p-button-text text-danger" (click)="deleteAssignment(assignment.id)"></button>
      </td>
    </tr>
  </tbody>
</table>


<p-dialog header="{{ isEditMode ? 'Edit Assignment' : 'New Assignment' }}"
          [(visible)]="dialogVisible"
          [modal]="true"
          [style]="{ width: '400px' }">
  <form [formGroup]="assignForm" (ngSubmit)="submit()">
    <div class="p-fluid">
      <div class="field">
        <label>Employee</label>
        <p-dropdown
          [options]="employees"
          optionLabel="name"
          optionValue="id"
          formControlName="employeeId"
          placeholder="Select Employee"
          [disabled]="isEditMode">
        </p-dropdown>
      </div>

      <div class="field">
        <label>Stock</label>
        <p-dropdown
          [options]="stocks"
          optionLabel="name"
          optionValue="id"
          formControlName="stockId"
          placeholder="Select Stock"
          [disabled]="isEditMode">
        </p-dropdown>
      </div>

      <div class="field">
        <label>Quantity</label>
        <input pInputText type="number" formControlName="assignedQuantity" />
      </div>

      <div class="mt-3 text-end">
        <button pButton type="submit"
                label="{{ isEditMode ? 'Update' : 'Create' }}"
                class="p-button-success"
                [disabled]="assignForm.invalid"></button>
      </div>
    </div>
  </form>
</p-dialog>
